<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Requests</title>

  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/style.css">

  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!--Session storage after the login-->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const staffId = sessionStorage.getItem('staff_id');
      const staffName = sessionStorage.getItem('staff_name');
      const staffFname = sessionStorage.getItem('staff_fname');
      const staffLname = sessionStorage.getItem('staff_lname')
      const dept = sessionStorage.getItem('dept');
      const role = sessionStorage.getItem('rolenum');
      const position = sessionStorage.getItem('position');
      const country = sessionStorage.getItem('country');
      const email = sessionStorage.getItem('email');
      const reportingmanager = sessionStorage.getItem('reportingmanager')


      // console log data
      console.log(`Staff ID: ${staffId}, Name: ${staffName}, Dept: ${dept}, Role: ${role}, Position: ${position}, Country: ${country}, Email:${email},Reportin Manager: ${reportingmanager}`);

      // get id and replace with data value
      document.getElementById('staffNameDisplay').textContent = staffName;
      document.getElementById('position').textContent = position;

      // Call the function to display the sidebar and apply role-based logic
      displaysidebar();
    });

  </script>

</head>

<body>

  <div class="wfhrequestsoverviewstaff">
    <div class="main-container">
      <div id="sidebar"></div>


      <!-- Main Content -->
      <main class="main-content">
        <!-- Header -->
        <header class="header">
          <div class="header-content">
            <h1>Requests</h1>
            <p>All My WFH Applications</p>
          </div>
          <div class="header-actions">
            <button class="notification-btn">
              <img src="img/huge-icon-device-outline-notification-1.svg" alt="Notifications">
            </button>
            <div class="user-profile">
              <img src="img/rectangle-3463281.png" alt="Profile" class="profile-img">
              <div class="user-info">
                <h3 id="staffNameDisplay"></h3>
                <p id="position"></p>
              </div>
              <!-- <img src="img/huge-icon-arrows-outline-direction-down-01-4.svg" alt="" class="dropdown-icon"> -->
            </div>
          </div>
        </header>

        <div class="content">
          <div class="actions">
            <input class="searchbar" type="search" placeholder="Search">
          </div>
          <div class="filter-row">
            <div class="filters-container">
              <div>
                <label for="wfhtypedropdown">WFH Type</label>
                <select class="dropdown" id="wfhtypedropdown">
                  <option value="">All</option>
                  <option>AM</option>
                  <option>PM</option>
                  <option>Full Day</option>
                </select>
              </div>

              <div>
                <label for="statusdropdown">Status</label>
                <select class="dropdown" id="statusdropdown">
                  <option value="">All</option>
                  <option>Pending</option>
                  <option>Approved</option>
                  <option>Rejected</option>
                  <option>Withdrawn</option>
                </select>
              </div>

              <div>
                <label for="requestdate">Request Date</label>
                <input type="date" class="datefilter" id="requestdate" />
              </div>
            </div>
            <button type="button" class="btn" id="clearfilters">Clear Filters</button>

            <button type="button" class="btn" id="applybtn" onclick="navigateTo('WFHRequestForm.html')">Apply</button>

          </div>

        </div>


        <!-- Table for WFH Requests -->
        <table>
          <thead>
            <tr id = "tableTitle">
              <th>Date</th>
              <th>Request Date</th>
              <th>Reason</th>
              <th>WFH Type</th>
              <th>Total Approved WFH</th>
              <th>Updated By</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="wfhRequestTableBody">
            <!-- This section will be dynamically populated using JavaScript -->
          </tbody>
        </table>

        <div class="pagination">
          <div class="per-page">
            <span>Showing</span>
            <select>
              <option>10</option>
            </select>
          </div>
          <p>Showing 1 to 10 out of 60 records</p>
          <div class="page-numbers">
            <button>&lt;</button>
            <button class="active" type="button">1</button>
            <button type="button">2</button>
            <button type="button">3</button>
            <button type="button">4</button>
            <button>&gt;</button>
          </div>
        </div>
    </div>
    </main>
  </div>
  </div>

  <!-- Routing for different pages and clickable dropdown menu -->
  <script src="js/MenuRoute.js"></script>

  <!--Sidebar js functions-->
  <script src="js/sidebar.js"></script>

  <!-- Fetching requests for individual staff -->
  <script src="js/WFHRequestsPerStaff.js"></script>
</body>

</html>